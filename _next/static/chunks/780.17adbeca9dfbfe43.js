"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[780],{3662:function(e,t,n){n.d(t,{Z:function(){return h}});var o=n(7812),r=n(7294),a=n(6625),i=n(623),c=n(9477);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:17.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5.25,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.06277,a=100,i=(0,o.Z)(Array(a+1)).map((function(o,r){var a=4===n?17.5:e,i=-Math.sin(r/a)*t,s=-Math.cos(r/a)*t;return new c.Vector3(i,s,0)})),s=new c.CatmullRomCurve3(i,!1),l=new c.TubeGeometry(s,100,.125,4,!1);return l.rotateZ(-Math.PI*r),l.rotateX(-Math.PI),l}var l=n(5893),f=function(e){var t=e.xPos,n=void 0===t?0:t,o=e.yPos,r=void 0===o?0:o;return(0,l.jsxs)("mesh",{position:[n,r,0],scale:[2,1,2],children:[(0,l.jsx)("circleGeometry",{args:[.5,32]}),(0,l.jsx)("meshBasicMaterial",{color:"black",transparent:!0,opacity:.45})]})},u=new c.MeshBasicMaterial({color:16776960,side:c.DoubleSide}),d=new c.PlaneGeometry(.1,22),v=[1,0,0,1],m=[2023,2e3,1980,1960,1940,1920,1900,1880];function h(e){var t=e.step1Complete,n=e.textScale,h=e.gap,p=void 0===h?.05:h,g=e.closed,b=void 0===g?.013:g,x=e.degrees,y=void 0===x?[1,0,1]:x,w=e.anchorY,P=void 0===w?"middle":w,j=(0,i.M4)({sliceOfPi:{value:p,min:.001,max:.5,step:.001},denominator:{value:b,min:.01,max:1,step:.001}}),M=j.denominator,O=j.sliceOfPi;return t?function(e){return(0,l.jsxs)("group",{rotation:[.5*Math.PI,0,0],position:[-11.5,-12,-12.5],children:[m.map((function(t,n){var o=12.5-3.05*n;return(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(f,{xPos:11.5,yPos:o}),(0,l.jsx)(a.x,{position:[11.5,o,.01],scale:[e,e,e],color:"white",anchorX:"center",anchorY:"middle",font:"/fonts/GT-Zirkon-Bold.woff",children:"".concat(t)},t)]},Math.random())})),(0,o.Z)(Array(3)).map((function(t,n){var o=5.65*n+3.1;return(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(a.x,{position:[o,13.5,0],scale:[e,e,e],color:"white",anchorX:"center",anchorY:"middle",font:"/fonts/GT-Zirkon-Bold.woff",children:"".concat(v[n],"\xb0C")}),(0,l.jsx)("mesh",{position:[o,2,0],geometry:d,material:u})]},Math.random())}))]})}(n):function(e,t,n,i,u){return(0,o.Z)(i).map((function(o,d){var v=2.95*d+3.75;return(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(f,{yPos:v}),(0,l.jsx)(a.x,{position:[0,v,.01],scale:[n,n,n],color:"white",anchorX:"center",anchorY:u,font:"/fonts/GT-Zirkon-Bold.woff",children:"".concat(i[d],"\xb0C")}),(0,l.jsx)("mesh",{rotation:[0,0,4===d?.05*Math.PI:0],geometry:s(18-(d+100)*e,9.75-3*d,d,t),children:(0,l.jsx)("meshBasicMaterial",{color:new c.Color(d-1===0?"green":"yellow"),material:!0})})]},Math.random())}))}(M,O,n,y,P)}},8780:function(e,t,n){n.r(t),n.d(t,{default:function(){return G}});var o=n(6835),r=n(7294),a=n(5449),i=n(9137),c=n(6625),s=n(623),l=n(9477),f=n(3662),u=n(5546);function d(){var e=(0,r.useState)(0),t=e[0],n=e[1];return(0,r.useEffect)((function(){if(!(t>142)){var e=setTimeout((function(){n(t+1)}),100);return function(){clearTimeout(e)}}}),[t]),{counter:t}}function v(e,t,n,o,r){return o+(e-t)/(n-t)*(r-o)}var m=n(5893);function h(e){var t=e.geometry,n=e.material,o=e.setStep1Complete,a=d().counter;return(0,r.useEffect)((function(){console.log("spiral: ",{counter:a});var e=1.67-v(a,0,143,.35,1.175);n.uniforms.fraction.value=e,e<.51&&setTimeout((function(){return o(!0)}),1e3)}),[a,n.uniforms.fraction,o]),(0,m.jsx)("mesh",{geometry:t,material:n,rotation:[Math.PI,0,.9*-Math.PI],scale:[1.25,1.25,1.25],visible:!0})}var p=n(4300),g=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map((function(e){for(var t=e.length/6|0,n=new Array(t),o=0;o<t;)n[o]="#"+e.slice(6*o,6*++o);return n})),b=(e=>(0,p.hD)(e[e.length-1]))(g),x=function(e){var t,n,o=e.rows,a=e.textScale,i=d().counter,s=null!==(t=null===(n=o[i])||void 0===n?void 0:n.average)&&void 0!==t?t:1;return console.log({counter:i}),(0,r.useEffect)((function(){console.log("yearCounter",{counter:i})}),[i]),(0,m.jsx)(c.x,{font:"/fonts/GT-Zirkon-Bold.woff",scale:[2.5*a,2.5*a,2.5*a],color:b(v(s,-1,1.25,1,0)),children:i+1880})},y=n(9499);function w(e,t,n,o,r,a,i){try{var c=e[a](i),s=c.value}catch(l){return void n(l)}c.done?t(s):Promise.resolve(s).then(o,r)}function P(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var a=e.apply(t,n);function i(e){w(a,o,r,i,c,"next",e)}function c(e){w(a,o,r,i,c,"throw",e)}i(void 0)}))}}var j=n(7794),M=n.n(j),O=n(7460);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(e){var t=(0,r.useState)([]),n=t[0],o=t[1];return(0,r.useEffect)((function(){function t(){return(t=P(M().mark((function t(){return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(0,O.parse)(e,{download:!0,header:!0,skipEmptyLines:!0,transform:function(e){return Number.isNaN(Number(e))?e:Number(e)},complete:function(e){var t=null===e||void 0===e?void 0:e.data.map((function(e){var t=["Year","D-N","DJF","J-D","JJA"],n=Object.keys(e).filter((function(e){return!t.includes(e)})).reduce((function(t,n){return t+e[n]}),0)/12;return D(D({},e),{},{average:n})}));console.log({calcAv:t}),o(t)}});case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e.includes("undefined")||e.includes(" ")||function(){return t.apply(this,arguments)}().catch(console.error)}),[e]),{rows:n}},Z=n(7812),A=n(9628);var C=new((0,i.g)({fraction:1.35,time:0,color:new l.Color(.05,0,.025)},"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying float vGradPos;\nattribute float gradientPosition;\nattribute float distance;\n\nvarying float vDistance;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nvoid main() {\n  vec4 mvPosition=modelViewMatrix*vec4(position,1.);\n  vUv = uv;\n  vGradPos = gradientPosition;\n  vDistance=distance;\n  vNormal=normalize(normalMatrix*normal);\n  vViewPosition=-mvPosition.xyz;\n  gl_Position = projectionMatrix * mvPosition;\n}\n","#define GLSLIFY 1\nuniform float time;\nuniform vec3 color;\nuniform float fraction;\n\nvarying vec2 vUv;\nvarying float vGradPos;\nvarying float vDistance;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nhighp float random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt= dot(co.xy ,vec2(a,b));\n    highp float sn= mod(dt,3.14);\n    return fract(sin(sn) * c);\n}\n\nvec3 color1=vec3(0.2863, 0.6157, 0.9686);\nvec3 color2=vec3(1.,1.,1.);\nvec3 color3=vec3(1.0, 0.6706, 0.2902);\nvec3 color4=vec3(1.,.3373,.3373);\n\nvoid main() {\n    if(vDistance<fraction)discard;\n    float step1=0.25;\n    float step2=.655;\n    float step3=.775;\n    float step4=.85;\n\n    vec3 color=mix(color1,color2,smoothstep(step1,step2,vGradPos));\n    vec3 color2=mix(color3,color4,smoothstep(step3,step4,vGradPos));\n    color=mix(color,color2,smoothstep(step2,step3,vGradPos));\n    // hack in a fake pointlight at camera location, plus ambient\n    vec3 normal=normalize(vNormal);\n    vec3 lightDir=normalize(vViewPosition);\n\n    float dotProduct=max(dot(normal,lightDir),0.)+.2;\n    // gl_FragColor.rgba = vec4(0.5 + 0.3 * sin(vUv.yxx + time) + color, 1.0);\n    //gl_FragColor.rgba = vec4(color.rgb, 1.);\n    // trick to make the clipped ends appear solid\n    gl_FragColor=(gl_FrontFacing)?vec4(color*dotProduct,1.):vec4(color,1.);\n}\n"))({side:l.DoubleSide});function G(){var e=k("/data/global_temp_2022.csv").rows,t=(0,s.M4)({textScale:{value:.5,min:.1,max:5,step:.1}}).textScale;console.log({rows:e});var n=function(e){if(!e||0===e.length)return{geometry:null};var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];console.log(e);for(var n=e.reduce((function(e,n){return[].concat((0,Z.Z)(e),[Object.keys(n).filter((function(e){return t.includes(e)})).map((function(e,t){return{Mean:n[e],Date:"".concat(n.Year,"-","".concat((o=t+1,1==="".concat(o).length?"0".concat(o):o)),"-01")};var o}))])}),[]),o=n.reverse().flat().filter((function(e){return"***"!==e.Mean})),r=(0,A.Z)().domain([-1,1.5]).range([-2,460/12-30]),a=2*Math.PI/12,i=[],c=0;c<o.length;c+=1){var s=o[c].Date,f=o[c].Mean;i.push({Date:s,Mean:f})}for(var u,d,v=o.map((function(e,t){var n=e.Mean,o=Math.sin((t+1)*a),i=Math.cos((t+1)*a),c=r(n)*o,s=r(n)*i,f=.01*t;return new l.Vector3(Number(c.toFixed(3)),Number(s.toFixed(3)),Number(f.toFixed(3)))})),m=new l.CatmullRomCurve3(v,!1),h=new l.TubeGeometry(m,15e3,.115,8,!1),p=h.getAttribute("position"),g=[],b=[],x=0;x<p.array.length;x+=3){var y=p.array[x],w=p.array[x+1],P=p.array[x+2],j=new l.Vector3(y,w,P),M=new l.Vector3(0,0,P),O=j.distanceTo(M),S=(O-(u=1.1077788772783308))*(1-(d=0))/(8.138178959765503-u)+d;g.push(S),b.push(O)}var D=new Float32Array(g);h.setAttribute("gradientPosition",new l.BufferAttribute(D,1));var k=h.attributes.position.count,C=new Float32Array(1*k);h.setAttribute("distance",new l.BufferAttribute(C,1));for(var G=0,F=k;G<F;G+=1)C[G]=(h.attributes.position.getZ(G)+10)/20.5;return h.setAttribute("distance",new l.BufferAttribute(C,1)),{geometry:h,months:t}}(e),i=n.geometry,d=n.months,v=(0,r.useState)(!1),p=v[0],g=v[1],b=(0,a.useSpring)((function(){return{rotation:[0,0,0],position:[0,0,0],config:{mass:10,tension:120,friction:240,precision:1e-4}}})),y=(0,o.Z)(b,2),w=y[0],P=y[1];return(0,r.useEffect)((function(){P.start({rotation:[p?.5*-Math.PI-.00675*Math.PI:0,0,p?4*-Math.PI:0],position:[0,p?10:0,0]})}),[p,P]),(0,m.jsxs)(r.Suspense,{fallback:(0,m.jsx)(c.x,{children:"LOADING"}),children:[(0,m.jsx)(s.Zf,{collapsed:!0,hidden:!0}),(0,m.jsxs)(a.a.group,{rotation:w.rotation.to((function(e,t,n){return[e,t,n]})),position:w.position.to((function(e,t,n){return[e,t,n]})),children:[i&&!p&&(0,m.jsx)(x,{rows:e,textScale:t}),(0,m.jsx)(f.Z,{textScale:t,step1Complete:p}),d&&!p&&(0,m.jsx)(u.Z,{textScale:t,months:d}),i&&(0,m.jsx)(h,{geometry:i,material:C,setStep1Complete:g})]})]})}},5546:function(e,t,n){var o=n(6625),r=n(5893);t.Z=function(e){var t=e.months,n=e.textScale;return t.map((function(e,t){var a=9*Math.sin(t/2)*1.185,i=9*Math.cos(t/2)*1.185;return(0,r.jsx)("group",{rotation:[0,0,.125*-Math.PI],children:(0,r.jsx)(o.x,{font:"/fonts/GT-Zirkon-Bold.woff",color:"white",rotation:[0,0,.125*Math.PI],scale:[1.5*n,1.5*n,1.5*n],position:[a,i,0],children:e})},Math.random())}))}}}]);